(function(){"use strict";angular.module("angular-loading-bar",["cfp.loadingBarInterceptor"]);angular.module("chieffancypants.loadingBar",["cfp.loadingBarInterceptor"]);angular.module("cfp.loadingBarInterceptor",["cfp.loadingBar"]).config(["$httpProvider",function(n){var t=["$q","$cacheFactory","$timeout","$rootScope","cfpLoadingBar",function(t,i,r,u,f){function c(){r.cancel(h);f.complete();o=0;e=0}function s(t){var u,f=n.defaults,r;return t.method!=="GET"||t.cache===!1?(t.cached=!1,!1):(u=t.cache===!0&&f.cache===undefined?i.get("$http"):f.cache!==undefined?f.cache:t.cache,r=u!==undefined?u.get(t.url)!==undefined:!1,t.cached!==undefined&&r!==t.cached)?t.cached:(t.cached=r,r)}var e=0,o=0,l=f.latencyThreshold,h;return{request:function(n){return n.ignoreLoadingBar||s(n)||(u.$broadcast("cfpLoadingBar:loading",{url:n.url}),e===0&&(h=r(function(){f.start()},l)),e++,f.set(o/e)),n},response:function(n){return!n||n.config.ignoreLoadingBar||s(n.config)||(o++,u.$broadcast("cfpLoadingBar:loaded",{url:n.config.url}),o>=e?c():f.set(o/e)),n},responseError:function(n){return n.config.ignoreLoadingBar||s(n.config)||(o++,u.$broadcast("cfpLoadingBar:loaded",{url:n.config.url}),o>=e?c():f.set(o/e)),t.reject(n)}}}];n.interceptors.push(t)}]);angular.module("cfp.loadingBar",[]).provider("cfpLoadingBar",function(){this.includeSpinner=!0;this.includeBar=!0;this.latencyThreshold=100;this.startSize=.02;this.parentSelector="body";this.$get=["$document","$timeout","$animate","$rootScope",function(n,t,i,r){function k(){var e=n.find(v);(t.cancel(l),u)||(r.$broadcast("cfpLoadingBar:started"),u=!0,w&&i.enter(o,e),p&&i.enter(h,e),f(b))}function f(n){if(u){var i=n*100+"%";y.css("width",i);s=n;t.cancel(c);c=t(function(){a()},250)}}function a(){var t,n,i;e()>=1||(t=0,n=e(),t=n>=0&&n<.25?(Math.random()*3+3)/100:n>=.25&&n<.65?Math.random()*3/100:n>=.65&&n<.9?Math.random()/50:n>=.9&&n<.99?.005:0,i=e()+t,f(i))}function e(){return s}function d(){r.$broadcast("cfpLoadingBar:completed");f(1);l=t(function(){i.leave(o,function(){s=0;u=!1});i.leave(h)},500)}var v=this.parentSelector,o=angular.element('<div id="loading-bar"><div class="bar"><div class="peg"><\/div><\/div><\/div>'),y=o.find("div").eq(0),h=angular.element('<div id="loading-bar-spinner"><div class="spinner-icon"><\/div><\/div>'),c,l,u=!1,s=0,p=this.includeSpinner,w=this.includeBar,b=this.startSize;return{start:k,set:f,status:e,inc:a,complete:d,includeSpinner:this.includeSpinner,latencyThreshold:this.latencyThreshold,parentSelector:this.parentSelector,startSize:this.startSize}}]})})();
/*
//# sourceMappingURL=angular-progress.min.js.map
*/